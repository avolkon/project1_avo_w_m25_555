# def parse(cmd):

#     '''
#     —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
#     –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∫–æ–º–∞–Ω–¥—ã, —Ä–∞–∑–±–∏—Ä–∞–µ—Ç –µ—ë –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç
#     –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∏–≥—Ä–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
#     (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –≤–∑—è—Ç–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ —Ç. –¥.).
#     '''

#     words = cmd.lower().strip().split() # –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É cmd –≤ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤
#     if not words: return # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–ø–∏—Å–æ–∫ words –ø—É—Å—Ç—ã–º
    
#     action = words[0] # –±–µ—Ä—ë—Ç –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞ words –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é action
#     if action == '–∏–¥—Ç–∏' and len(words) > 1: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ –≤–≤–æ–¥–µ —Å –∫–æ–º–∞–Ω–¥–æ–π "–∏–¥—Ç–∏"
#         move(words[1]) # –ø–µ—Ä–µ–¥–∞—ë—Ç –≤—Ç–æ—Ä–æ–µ —Å–ª–æ–≤–æ –∏–∑ –≤–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) –≤ —Ñ—É–Ω–∫—Ü–∏—é move()
#     elif action == '–≤–∑—è—Ç—å' and len(words) > 1: # –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –±–ª–æ–∫—É —Å –∫–æ–º–∞–Ω–¥–æ–π "–∏–¥—Ç–∏"
#         take(words[1]) # –ø–µ—Ä–µ–¥–∞—ë—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é take()
#     elif action == '–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã': # –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã "–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã"
#         artifacts_list() # –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∫–∞–∑–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
#     elif action in ['–ø–æ–º–æ—â—å', 'help', 'f1']: # —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–∏–Ω–æ–Ω–∏–º—ã –∫–æ–º–∞–Ω–¥—ã —Å–ø—Ä–∞–≤–∫–∏
#         help() # –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥ (—Ñ—É–Ω–∫—Ü–∏—é help())
#     elif action == '–æ—Å–º–æ—Ç—Ä–µ—Ç—å': # –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É '–æ—Å–º–æ—Ç—Ä–µ—Ç—å'
#         show_room() # –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–º–Ω–∞—Ç—É (–≤—ã–∑—ã–≤–∞–µ—Ç show_room())
#     else:
#         solve(cmd) # —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Å–æ–≤–ø–∞–ª–∞ –Ω–∏ —Å –æ–¥–Ω–∏–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.


def move(direction):
    '''–°—É—Ç—å: –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –∏–≥—Ä–æ–∫–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É.
    –õ–æ–≥–∏–∫–∞:
    1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –≤—ã—Ö–æ–¥ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ direction.
    2. –ï—Å–ª–∏ –¥–∞ ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç current_room, —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ —à–∞–≥–æ–≤,
    –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–±–µ–¥—É.
    3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫—É —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π.
    '''

    exits = ROOMS[game_state['current_room']]['exits'] #–ø–æ–ª—É—á–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π) –¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.
    if direction in exits: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—ã—Ö–æ–¥–æ–≤
        game_state['current_room'] = exits[direction] # –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–º–Ω–∞—Ç—É –∏–≥—Ä–æ–∫–∞
        game_state['steps'] += 1 # —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤ –Ω–∞ 1 –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Ö–æ–¥–æ–≤ —Å–¥–µ–ª–∞–ª –∏–≥—Ä–æ–∫ (–¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –∫–æ–Ω—Ü–µ –∏–≥—Ä—ã).
        show_room() # –≤—ã–≤–æ–¥–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—ã—Ö–æ–¥—ã, –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –¥—Ä—É–≥—É—é –∏–Ω—Ñ–æ
        check_win() # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ—Å—Ç–∏–≥ –ª–∏ –∏–≥—Ä–æ–∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã –∏ –≤—ã–ø–æ–ª–Ω–∏–ª –ª–∏ –≤—Å–µ —É—Å–ª–æ–≤–∏—è
    else:
        print(f"‚ùå –ù–µ—Ç '{direction}'. –î–æ—Å—Ç—É–ø–Ω–æ: {', '.join(exits.keys())}")
        # —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –ø–æ–ø—ã—Ç–∞–ª—Å—è –ø–æ–π—Ç–∏ –≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
        # (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–≤—ë–ª –∏–¥—Ç–∏ –∑–∞–ø–∞–¥, –∞ –≤—ã—Ö–æ–¥–∞ –Ω–∞ –∑–∞–ø–∞–¥ –Ω–µ—Ç)

def take(item):

    '''–°—É—Ç—å: –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.
    –õ–æ–≥–∏–∫–∞:
    1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ (room_items).
    2. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –µ—â—ë –Ω–µ —Å–æ–±—Ä–∞–Ω (–Ω–µ—Ç –≤ artifacts).
    3. –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –≤ artifacts, —É–¥–∞–ª—è–µ—Ç –∏–∑ –∫–æ–º–Ω–∞—Ç—ã, –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.
    4. –ï—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å ‚Äî —Å–æ–æ–±—â–∞–µ—Ç –æ–± —ç—Ç–æ–º.
    5. –ï—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–µ—Ç ‚Äî –≤—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫—É.
    '''

    room_items = ROOMS[game_state['current_room']]['items'] # –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
    if item in room_items: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π fhntafrn –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∫–æ–º–Ω–∞—Ç—ã.
        if item not in game_state['items']: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ—Ç –ª–∏ —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ —É–∂–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–≥—Ä–æ–∫–∞
            game_state['items'].append(item) # –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –≤ –Ω–∞–±–æ—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞
            room_items.remove(item) # —É–¥–∞–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∫–æ–º–Ω–∞—Ç—ã (—á—Ç–æ–±—ã –µ–≥–æ –Ω–µ–ª—å–∑—è –±—ã–ª–æ –≤–∑—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ).
            print(f"‚úÖ –í–∑—è—Ç: {item}")
        else:
            print("‚ùå –£–∂–µ –µ—Å—Ç—å!")
    else:
        print("‚ùå –ù–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞")

def items_list():

    '''–°—É—Ç—å: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.
    –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
    1. –ï—Å–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –Ω–µ—Ç ‚Äî –≤—ã–≤–æ–¥–∏—Ç ¬´–ø—É—Å—Ç¬ª.
    2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ —Å–∫–æ–±–∫–∞—Ö.
    '''
    items = game_state['items'] # —Å–æ–∑–¥–∞—ë—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–≥—Ä–æ–∫–∞.
    print(f"üíé ({len(items)}): {', '.join(items) or '–ø—É—Å—Ç'}")

# –§—É–Ω–∫—Ü–∏—è use_item –ø—Ä—è–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

def use_item(game_state, item_name):
    '''
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –Ω–∞–±–æ—Ä–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.
    '''
    items = game_state.get('items', [])
    
    if item_name not in items:
        print("‚ùå –£ –≤–∞—Å –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞.")
        return False
    
    if item_name == 'torch':
        print("üî• –ú–æ–∂–µ—à—å –æ—Å–≤–µ—â–∞—Ç—å —Å–≤–æ–π –ø—É—Ç—å! –ù–æ —Ä–∞—Å—Ö–æ–¥—É–π –∑–∞—Ä—è–¥ —ç–∫–æ–Ω–æ–º–Ω–æ.")
    
    elif item_name == 'sword':
        print("‚öîÔ∏è –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å!")
    
    elif item_name == 'bronze_box':
        if 'rusty_key' not in items:
            game_state['items'].append('rusty_key')
            print("‚úÖ –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å rusty_key!")
        else:
            print("‚úÖ –®–∫–∞—Ç—É–ª–∫–∞ –ø—É—Å—Ç–∞.")
    
    elif item_name == 'golden_chest':
        print("üèÜ –ü–û–ë–ï–î–ê!")
    
    elif item_name == 'candle':
        print("üïØÔ∏è –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–≤–µ—Ç–∞ –¥–ª—è –ø—Ä–æ—á—Ç–µ–Ω–∏—è –∫–Ω–∏–≥–∏!")
    
    elif item_name == 'silver_cross':
        print("‚úùÔ∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–∞—Å–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ –æ–±–∏—Ç–∞—Ç–µ–ª–µ–π –ª–∞–±–∏—Ä–∏–Ω—Ç–∞!")

    elif item_name == 'ancient_book':
        print("üìñ –¢–µ–ø–µ—Ä—å —Ç–µ–±–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥—Ä–µ–≤–Ω–∏–µ –∑–Ω–∞–Ω–∏—è!")

    elif item_name == 'rotten_wood':
        print("üå≤ –ì–Ω–∏–ª—ã–µ –¥—Ä–æ–≤–∞ ‚Äî –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã.")

    elif item_name == 'glowing_mushroom':
        print("üçÑ –ì—Ä–∏–± —Å–≤–µ—Ç–∏—Ç—Å—è, –ø–æ–∫–∞ —Ä–∞—Å—Ç—ë—Ç, –ª—É—á—à–µ –µ–≥–æ –Ω–µ –±—Ä–∞—Ç—å, \n–ø–æ–º–æ–∂–µ—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é —Ç–≤–æ–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–≤–µ—Ç–∞.")

    elif item_name == 'water_flask':
        print("üíß –ñ–∏–≤–∞—è –≤–æ–¥–∞ –≤–æ—Å–ø–æ–ª–Ω–∏–ª–∞ —Å–∏–ª—ã –∏ —É–ª—É—á—à–∏–ª–∞ —Å–º–µ–∫–∞–ª–∫—É!")

    elif item_name == 'small_boat':
        print("üö§ –õ–æ–¥–∫–∞ –ø–æ–º–æ–∂–µ—Ç –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ —Ü–µ–Ω—Ç—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –Ω–∞–±—Ä–∞—Ç—å –∂–∏–≤–æ–π –≤–æ–¥—ã.")

    else:
        print(f"‚ùì –ù–µ –∑–Ω–∞–µ—Ç–µ '{item_name}'.")
    
    return True

# –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è solve:

def solve(answer):

    '''
    –°—É—Ç—å: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.
    –õ–æ–≥–∏–∫–∞:
    1. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –∑–∞–≥–∞–¥–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ —Ä–µ—à–µ–Ω–∞.
    2. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤–≤–µ–¥—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º (–±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –∏ –ø—Ä–æ–±–µ–ª–æ–≤).
    3. –ü—Ä–∏ –≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ:
        –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—É –≤ solved_puzzles.
        –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ puzzles_solved.
        –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ.
    4. –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É.
    '''

    room = ROOMS[game_state['current_room']] # –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è –ª–æ–∫–∞—Ü–∏–π.
    if room.get('puzzle') and game_state['current_room'] not in solved_puzzles: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–≤–∞ —É—Å–ª–æ–≤–∏—è^
        # –í —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ –µ—Å—Ç—å –∑–∞–≥–∞–¥–∫–∞
        # –≠—Ç–∞ –∫–æ–º–Ω–∞—Ç–∞ –µ—â—ë –Ω–µ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ ¬´—Ä–µ—à—ë–Ω–Ω–∞—è¬ª (current_room –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ solved_puzzles)
        if answer.strip().lower() == room['puzzle'][1].strip().lower(): # —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏–≥—Ä–æ–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –∑–∞–≥–∞–¥–∫–∏
            solved_puzzles.add(game_state['current_room']) # –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–º–Ω–∞—Ç—É –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö
            game_state['puzzles_solved'] += 1 # —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ —Ä–µ—à—ë–Ω–Ω—ã—Ö –∑–∞–≥–∞–¥–æ–∫ –Ω–∞ 1
            print("üéâ –ó–∞–≥–∞–¥–∫–∞ —Ä–µ—à–µ–Ω–∞!")
            return True
        print("‚ùå –ù–µ–≤–µ—Ä–Ω–æ! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë.")
        return False

# show_room - –∞–Ω–∞–ª–æ–≥ describe_room

def show_room():
    '''–°—É—Ç—å: –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ.
    –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
    1. –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –∏–∑ ROOMS –ø–æ –∫–ª—é—á—É current_room.
    2. –ü–µ—á–∞—Ç–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏.
    3. –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Ä–µ—à—ë–Ω–Ω–∞—è –∑–∞–≥–∞–¥–∫–∞ ‚Äî –≤—ã–≤–æ–¥–∏—Ç –µ—ë —Ç–µ–∫—Å—Ç.
    4. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—ã—Ö–æ–¥—ã (exits) –∏ –ø—Ä–µ–¥–º–µ—Ç—ã (items).
    5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ –∏ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.
    '''

    room = ROOMS[game_state['current_room']]
    print(f"\n{'‚ïê' * 50}")
    print(f"üìç {game_state['current_room'].title()}")
    print(room['description'])
    
    if room.get('puzzle') and game_state['current_room'] not in solved_puzzles:
        print(f"\nüîí –ó–ê–ì–ê–î–ö–ê:\n{room['puzzle'][0]}")
    
    print(f"\n‚Üí –í—ã—Ö–æ–¥—ã: {', '.join(room['exits'].keys())}")
    if room['items']:
        print(f"üíé –ù–∞–π–¥–µ–Ω–æ: {', '.join(room['items'])}")
    
    print(f"‚òÖ –®–∞–≥–æ–≤: {game_state['steps']} | üíé –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: {len(game_state['items'])}")

# –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
def describe_room(game_state):
    '''look/–æ—Å–º–æ—Ç—Ä–µ—Ç—å ‚Äî –∞–Ω–∞–ª–æ–≥ show_room –±–µ–∑ –∑–∞–≥–∞–¥–∫–∏.'''
    show_room()  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é

# –ú–æ–¥—É–ª—å: —Ä–µ—à–µ–Ω–∏–µ –∑–∞–≥–∞–¥–æ–∫, —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º: –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
# –≤—ã–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã, –Ω–µ —Ä–µ—à–∏–≤ –∑–∞–≥–∞–¥–∫—É, –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ–∑–¥–Ω–µ–µ
# –≤—ã–±—Ä–∞—Ç—å –≤–∑—è—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∏–ª–∏ –Ω–µ—Ç
# —Ä–µ—à–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–≥–∞–¥–æ–∫ –≤ –æ–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ

def solve_puzzle(game_state):
    '''
    –†–µ—à–∞–µ—Ç –∑–∞–≥–∞–¥–∫—É —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã —Å 2 –∏ –±–æ–ª–µ–µ –ø–æ–ø—ã—Ç–∫–∞–º–∏
    + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤—ã–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã, –æ—Å—Ç–∞–≤–∏–≤ –∑–∞–≥–∞–¥–∫—É –Ω–µ—Ä–µ—à—ë–Ω–Ω–æ–π.
    '''
    current_room = game_state['current_room']
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á—ë—Ç—á–∏–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ
    if 'puzzles_count' not in ROOMS[current_room]:
        ROOMS[current_room]['puzzles_count'] = 1 if ROOMS[current_room].get('puzzle') else 0
    
    while True:
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—á—ë—Ç—á–∏–∫–∞ –∑–∞–≥–∞–¥–æ–∫
        if ROOMS[current_room]['puzzles_count'] <= 0:
            print("–ó–∞–≥–∞–¥–æ–∫ –∑–¥–µ—Å—å –Ω–µ—Ç. –í—Å–µ –∑–∞–≥–∞–¥–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ —Ä–µ—à–µ–Ω—ã")
            ROOMS[current_room]['puzzle'] = None
            return True
        
        # –ó–∞–≥–∞–¥–∫–∞ –µ—Å—Ç—å - —Ä–µ—à–∞–µ–º
        puzzle = ROOMS[current_room]['puzzle']
        question, correct_answer = puzzle
        
        # 2 –ø–æ–ø—ã—Ç–∫–∏
        for attempt in range(2):
            print(question)
            
            user_answer = input("–¢–≤–æ–π –æ—Ç–≤–µ—Ç: \n> ").strip().lower()
            
            if user_answer == correct_answer.lower():
                # –£–°–ü–ï–•!
                ROOMS[current_room]['puzzles_count'] -= 1  # –£–º–µ–Ω—å—à–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –∑–∞–≥–∞–¥–æ–∫ –Ω–∞ 1
                print(f"–û—Å—Ç–∞–ª–æ—Å—å –∑–∞–≥–∞–¥–æ–∫: {ROOMS[current_room]['puzzles_count']}")
                
                # –ù–∞–≥—Ä–∞–¥–∞
                reward = ROOMS[current_room]['items'][0] if ROOMS[current_room]['items'] else 'mystery_reward'
                
                print(f"–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ù–∞–≥—Ä–∞–¥–∞: {reward}")
                
                # –í—ã–±–æ—Ä: –≤–∑—è—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç?
                choice = input(f"–í–∑—è—Ç—å {reward}? (–¥–∞/–Ω–µ—Ç): ").strip().lower()
                
                if choice in ['–¥–∞', 'yes', 'y']:
                    if 'items' not in game_state:
                        game_state['items'] = []
                    game_state['items'].append(reward)
                    ROOMS[current_room]['items'].pop(0)
                    print(f"{reward} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å")
                    
                    # –°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ ITEM_ACTIONS
                    if reward in ITEM_ACTIONS:
                        ITEM_ACTIONS[reward](game_state)
                
                else:
                    print(f"{reward} –æ—Å—Ç–∞–≤–ª–µ–Ω –≤ –∫–æ–º–Ω–∞—Ç–µ")
                
                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∑–∞–≥–∞–¥–∫–∏
                if ROOMS[current_room]['puzzles_count'] <= 0:
                    print("–ó–∞–≥–∞–¥–æ–∫ –∑–¥–µ—Å—å –Ω–µ—Ç. –í—Å–µ –∑–∞–≥–∞–¥–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ —Ä–µ—à–µ–Ω—ã")
                    ROOMS[current_room]['puzzle'] = None
                    describe_room(game_state)
                    return True
                
                break  # –ö —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥–∞–¥–∫–µ
            
            else:
                print("–ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.")
        
        # 2 –Ω–µ—É–¥–∞—á–∏ ‚Üí –≤—ã–±–æ—Ä
        print("–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—é–¥–∞ –ø–æ–∑–¥–Ω–µ–µ")
        choice = input("–≤–≤–µ–¥–∏ 'back' –∏–ª–∏ '–Ω–∞–∑–∞–¥' (–ø—Ä–æ–±–µ–ª=–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å): ").strip().lower()
        
        if choice in ['back', '–Ω–∞–∑–∞–¥']:
            back(game_state)
            return False
        elif choice == ' ' or choice == '':
            continue  # –ü–æ–≤—Ç–æ—Ä –∑–∞–≥–∞–¥–∫–∏
   