# def main():
#     """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã."""
#     print("–ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç!")

# # –ü—Ä–æ–≤–µ—Ä–∫–∞: –∑–∞–ø—É—â–µ–Ω –ª–∏ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ (–∞ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω)
# if __name__ == "__main__":
#     main()

# –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π –∏–≥—Ä—ã
from labyrinth_game.constants import ROOMS, START_ROOM, WIN_ROOM, COMMANDS, MESSAGES
from player_actions import move_player, take_item, use_item, look_items, get_input
from utils import describe_room

def main():

    '''
    –§—É–Ω–∫—Ü–∏—è main() ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –∏–≥—Ä—É.
    –û–Ω–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å:
    –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É
    –∏ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
    –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥ –∏–≥—Ä–æ–∫–∞ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã.
    '''

    print("üî• –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –õ–∞–±–∏—Ä–∏–Ω—Ç —Å–æ–∫—Ä–æ–≤–∏—â! üî•")
    print("üéØ –¢–µ–±—è –∂–¥—ë—Ç –ø–æ–±–µ–¥–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ treasure_room –∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ golden_chest")
    show_room()
    
    while not game_state['game_over']:
        # –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–∫–∞ –∏–≥—Ä–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
        # game_state['game_over'] ‚Äî —Ñ–ª–∞–≥ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏–≥—Ä—ã:
        # False ‚Äî –∏–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è ‚Üí —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç
        # True ‚Äî –∏–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Üí —Ü–∏–∫–ª –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
        try: 
            # –Ω–∞—á–∏–Ω–∞–µ—Ç –±–ª–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –∑–∞—â–∏—â–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É
            # –æ—Ç –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è—Ö
            # (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–∞–∂–º—ë—Ç Ctrl+C)

            cmd = get_input("\n–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: –¥–µ–π—Å—Ç–≤–∏–µ + –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ\n(–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ help –∏–ª–∏ –ø–æ–º–æ—â—å)\n> ")
            # –í—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ, –ü–µ—Ä–µ–¥–∞—ë—Ç –≤–≤–µ–¥—ë–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ñ—É–Ω–∫—Ü–∏—é parse()
            # –≠—Ñ—Ñ–µ–∫—Ç: –∏–≥—Ä–æ–∫ –≤–≤–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, go north), –æ–Ω–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å
            process_command(game_state, cmd)
            # –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–±–∏—Ä–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ
            # (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –ø–æ–¥–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ –∏ —Ç. –¥.)

        except (KeyboardInterrupt, EOFError): # –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è 2 —Ç–∏–ø–æ–≤
            print("\nüëã –í—ã—Ö–æ–¥.")
            break

if __name__ == "__main__":
    # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–∞–ø—Ä—è–º—É—é
    # (–∞ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –º–æ–¥—É–ª—å)
    # –ï—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–ø—É—â–µ–Ω —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, __name__ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω "__main__"
    # –ï—Å–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ –¥—Ä—É–≥–æ–π —Å–∫—Ä–∏–ø—Ç,
    # —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è (—á—Ç–æ–±—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–≥—Ä—É —Å–ª—É—á–∞–π–Ω–æ)
    main()
    # –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é main(), –∫–æ—Ç–æ—Ä–∞—è:
    # –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ;
    # –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É;
    # –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤—ã—à–µ –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª.
    # C—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞–ø—Ä—è–º—É—é

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–∞
game_state = {
    'items': [],  # –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–≥—Ä–æ–∫–∞ ['torch', 'rusty_key' –∏—Ç–¥.]        
    'current_room': START_ROOM, # 'entrance'
    'game_over': False, # –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
    'steps': 0,  # –°—á–µ—Ç—á–∏–∫ —Ö–æ–¥–æ–≤
    'puzzles_solved': 0  # 0-6 –∑–∞–≥–∞–¥–æ–∫
}

solved_puzzles = set() # {'hall', 'library'}

def show_room():
    '''–°—É—Ç—å: –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ.
    –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
    1. –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –∏–∑ ROOMS –ø–æ –∫–ª—é—á—É current_room.
    2. –ü–µ—á–∞—Ç–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏.
    3. –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Ä–µ—à—ë–Ω–Ω–∞—è –∑–∞–≥–∞–¥–∫–∞ ‚Äî –≤—ã–≤–æ–¥–∏—Ç –µ—ë —Ç–µ–∫—Å—Ç.
    4. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—ã—Ö–æ–¥—ã (exits) –∏ –ø—Ä–µ–¥–º–µ—Ç—ã (items).
    5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ –∏ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.
    '''

    room = ROOMS[game_state['current_room']]
    print(f"\n{'‚ïê' * 50}")
    print(f"üìç {game_state['current_room'].title()}")
    print(room['description'])
    
    if room.get('puzzle') and game_state['current_room'] not in solved_puzzles:
        print(f"\nüîí –ó–ê–ì–ê–î–ö–ê:\n{room['puzzle'][0]}")
    
    print(f"\n‚Üí –í—ã—Ö–æ–¥—ã: {', '.join(room['exits'].keys())}")
    if room['items']:
        print(f"üíé –ù–∞–π–¥–µ–Ω–æ: {', '.join(room['items'])}")
    
    print(f"‚òÖ –®–∞–≥–æ–≤: {game_state['steps']} | üíé –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: {len(game_state['items'])}")


def move(direction):
    '''–°—É—Ç—å: –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –∏–≥—Ä–æ–∫–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É.
    –õ–æ–≥–∏–∫–∞:
    1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –≤—ã—Ö–æ–¥ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ direction.
    2. –ï—Å–ª–∏ –¥–∞ ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç current_room, —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ —à–∞–≥–æ–≤,
    –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–±–µ–¥—É.
    3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫—É —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π.
    '''

    exits = ROOMS[game_state['current_room']]['exits'] #–ø–æ–ª—É—á–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π) –¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.
    if direction in exits: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—ã—Ö–æ–¥–æ–≤
        game_state['current_room'] = exits[direction] # –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–º–Ω–∞—Ç—É –∏–≥—Ä–æ–∫–∞
        game_state['steps'] += 1 # —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤ –Ω–∞ 1 –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Ö–æ–¥–æ–≤ —Å–¥–µ–ª–∞–ª –∏–≥—Ä–æ–∫ (–¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –∫–æ–Ω—Ü–µ –∏–≥—Ä—ã).
        show_room() # –≤—ã–≤–æ–¥–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—ã—Ö–æ–¥—ã, –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –¥—Ä—É–≥—É—é –∏–Ω—Ñ–æ
        check_win() # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ—Å—Ç–∏–≥ –ª–∏ –∏–≥—Ä–æ–∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã –∏ –≤—ã–ø–æ–ª–Ω–∏–ª –ª–∏ –≤—Å–µ —É—Å–ª–æ–≤–∏—è
    else:
        print(f"‚ùå –ù–µ—Ç '{direction}'. –î–æ—Å—Ç—É–ø–Ω–æ: {', '.join(exits.keys())}")
        # —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –ø–æ–ø—ã—Ç–∞–ª—Å—è –ø–æ–π—Ç–∏ –≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
        # (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–≤—ë–ª –∏–¥—Ç–∏ –∑–∞–ø–∞–¥, –∞ –≤—ã—Ö–æ–¥–∞ –Ω–∞ –∑–∞–ø–∞–¥ –Ω–µ—Ç)

def take(item):

    '''–°—É—Ç—å: –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.
    –õ–æ–≥–∏–∫–∞:
    1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ (room_items).
    2. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –µ—â—ë –Ω–µ —Å–æ–±—Ä–∞–Ω (–Ω–µ—Ç –≤ artifacts).
    3. –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –≤ artifacts, —É–¥–∞–ª—è–µ—Ç –∏–∑ –∫–æ–º–Ω–∞—Ç—ã, –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.
    4. –ï—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç —É–∂–µ –µ—Å—Ç—å ‚Äî —Å–æ–æ–±—â–∞–µ—Ç –æ–± —ç—Ç–æ–º.
    5. –ï—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–µ—Ç ‚Äî –≤—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫—É.
    '''

    room_items = ROOMS[game_state['current_room']]['items'] # –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
    if item in room_items: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π fhntafrn –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∫–æ–º–Ω–∞—Ç—ã.
        if item not in game_state['items']: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ—Ç –ª–∏ —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ —É–∂–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–≥—Ä–æ–∫–∞
            game_state['items'].append(item) # –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –≤ –Ω–∞–±–æ—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞
            room_items.remove(item) # —É–¥–∞–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∫–æ–º–Ω–∞—Ç—ã (—á—Ç–æ–±—ã –µ–≥–æ –Ω–µ–ª—å–∑—è –±—ã–ª–æ –≤–∑—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ).
            print(f"‚úÖ –í–∑—è—Ç: {item}")
        else:
            print("‚ùå –£–∂–µ –µ—Å—Ç—å!")
    else:
        print("‚ùå –ù–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞")

def items_list():

    '''–°—É—Ç—å: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.
    –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
    1. –ï—Å–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –Ω–µ—Ç ‚Äî –≤—ã–≤–æ–¥–∏—Ç ¬´–ø—É—Å—Ç¬ª.
    2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ —Å–∫–æ–±–∫–∞—Ö.
    '''
    items = game_state['items'] # —Å–æ–∑–¥–∞—ë—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–≥—Ä–æ–∫–∞.
    print(f"üíé ({len(items)}): {', '.join(items) or '–ø—É—Å—Ç'}")

def solve(answer):

    '''
    –°—É—Ç—å: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.
    –õ–æ–≥–∏–∫–∞:
    1. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –∑–∞–≥–∞–¥–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ —Ä–µ—à–µ–Ω–∞.
    2. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤–≤–µ–¥—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º (–±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –∏ –ø—Ä–æ–±–µ–ª–æ–≤).
    3. –ü—Ä–∏ –≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ:
        –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—É –≤ solved_puzzles.
        –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ puzzles_solved.
        –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ.
    4. –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É.
    '''

    room = ROOMS[game_state['current_room']] # –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è –ª–æ–∫–∞—Ü–∏–π.
    if room.get('puzzle') and game_state['current_room'] not in solved_puzzles: # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–≤–∞ —É—Å–ª–æ–≤–∏—è^
        # –í —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ –µ—Å—Ç—å –∑–∞–≥–∞–¥–∫–∞
        # –≠—Ç–∞ –∫–æ–º–Ω–∞—Ç–∞ –µ—â—ë –Ω–µ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ ¬´—Ä–µ—à—ë–Ω–Ω–∞—è¬ª (current_room –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ solved_puzzles)
        if answer.strip().lower() == room['puzzle'][1].strip().lower(): # —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏–≥—Ä–æ–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –∑–∞–≥–∞–¥–∫–∏
            solved_puzzles.add(game_state['current_room']) # –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–º–Ω–∞—Ç—É –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–µ—à—ë–Ω–Ω—ã—Ö
            game_state['puzzles_solved'] += 1 # —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ —Ä–µ—à—ë–Ω–Ω—ã—Ö –∑–∞–≥–∞–¥–æ–∫ –Ω–∞ 1
            print("üéâ –ó–∞–≥–∞–¥–∫–∞ —Ä–µ—à–µ–Ω–∞!")
            return True
        print("‚ùå –ù–µ–≤–µ—Ä–Ω–æ! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë.")
        return False

def check_win():
    
    '''–°—É—Ç—å: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã.
    –£—Å–ª–æ–≤–∏—è:
    1. –ò–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ WIN_ROOM.
    2. –í –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –µ—Å—Ç—å 'golden_chest'.
    –†–µ–∑—É–ª—å—Ç–∞—Ç:
    1. –í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–±–µ–¥–µ.
    2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—à–∞–≥–∏, —Ä–µ—à—ë–Ω–Ω—ã–µ –∑–∞–≥–∞–¥–∫–∏, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã).
    3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ game_over = True –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã.
    '''

    if (game_state['current_room'] == WIN_ROOM and
        'golden_chest' in game_state['items']):
        # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–≤–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
        # –∏–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ
        # –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–≥—Ä–æ–∫–∞ (artifacts) –µ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç 'golden_chest'
        print(f"\n{'üéâ' * 25}")
        print("üèÜ –ü–û–ë–ï–î–ê! –°–æ–∫—Ä–æ–≤–∏—â–∞ –≤–∞—à–∏!")
        print(f"üìà {game_state['steps']} —à–∞–≥–æ–≤ | {game_state['puzzles_solved']}/6")
        print(f"–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã: {game_state['items']}")
        game_state['game_over'] = True

def help(): # –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤;
    #–ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –∏–≥—Ä—ã

    '''–°—É—Ç—å: –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
    –§–æ—Ä–º–∞—Ç:
    –ö—Ä–∞—Ç–∫–∏–π –ø–µ—Ä–µ—á–µ–Ω—å –∫–æ–º–∞–Ω–¥.
    –ü—Ä–∏–º–µ—Ä—ã –≤–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–¥—Ç–∏ —Å–µ–≤–µ—Ä).
    '''

    print("\nüìã –ö–û–ú–ê–ù–î–´:")
    print("–∏–¥—Ç–∏ | go/–≤–∑—è—Ç—å | take/–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã | items/–ø–æ–º–æ—â—å | help/–æ—Å–º–æ—Ç—Ä–µ—Ç—å | look")
    print("üí° go north | take torch")


def describe_room(game_state):
    '''look/–æ—Å–º–æ—Ç—Ä–µ—Ç—å ‚Äî –∞–Ω–∞–ª–æ–≥ show_room –±–µ–∑ –∑–∞–≥–∞–¥–∫–∏.'''
    show_room()  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é

def process_command(game_state, command):
    '''
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã —Å match/case.
    '''
    parts = command.lower().strip().split(maxsplit=1)
    action = parts[0] if parts else '' # –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ (–¥–µ–π—Å—Ç–≤–∏–µ) –∏–∑ parts
    arg = parts[1] if len(parts) > 1 else '' # –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç (–∞—Ä–≥—É–º–µ–Ω—Ç) –∏–∑ parts, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
    
    match action:
        case 'go' | '–∏–¥—Ç–∏': # –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ action —Ä–∞–≤–µ–Ω 'go' –∏–ª–∏ '–∏–¥—Ç–∏'
            if arg: move_player(game_state, arg) #–ï—Å–ª–∏ –µ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç (arg –Ω–µ –ø—É—Å—Ç),
            # –≤—ã–∑—ã–≤–∞–µ—Ç move_player —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
            # –ù–∞–ø—Ä–∏–º–µ—Ä: go north ‚Üí move_player(game_state, 'north')
            else: print("‚ùå –ö—É–¥–∞ –∏–¥—Ç–∏?")
        
        case 'take' | '–≤–∑—è—Ç—å':
            if arg: take_item(game_state, arg) # –ï—Å–ª–∏ –µ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç, –≤—ã–∑—ã–≤–∞–µ—Ç take_item (–ø–æ–¥–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞)
            else: print("‚ùå –ß—Ç–æ –≤–∑—è—Ç—å?")
        
        case 'use' | '–ø—Ä–∏–º–µ–Ω–∏—Ç—å':
            if arg: use_item(game_state, arg) # –í—ã–∑—ã–≤–∞–µ—Ç use_item —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º (–Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞)
            else: print("‚ùå –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?")
        
        case 'look' | '–æ—Å–º–æ—Ç—Ä–µ—Ç—å':
            describe_room(game_state) # –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –≤—ã–≤–æ–¥—è—â—É—é –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
        
        case 'items' | '–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã':
            look_items(game_state) # –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –ø–æ–∫–∞–∑—ã–≤–∞—é—â—É—é —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞
        
        case 'help' | '–ø–æ–º–æ—â—å':
            help() # –í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
        
        case 'quit' | 'exit' | '–≤—ã—Ö–æ–¥':
            game_state['game_over'] = True # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ True
            print("üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
        
        case _:
            solve(command)  # –ó–∞–≥–∞–¥–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∫–∞–∫ –≤ parse)
            # –í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é solve —Å –ø–æ–ª–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
            # (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ –∑–∞–≥–∞–¥–∫–∞ –∏–ª–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã
    check_win()

